"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[115],{5115:function(t,e,n){n.r(e);var r=n(885),a=n(9157),c=n(2791),u=n(501),s=n(184);e.default=function(){var t=(0,c.useState)([]),e=(0,r.Z)(t,2),n=e[0],i=e[1],o=(0,c.useState)(""),p=(0,r.Z)(o,2),f=p[0],l=p[1],h=(0,c.useState)(!1),d=(0,r.Z)(h,2),x=d[0],v=d[1],m=(0,c.useState)(!1),g=(0,r.Z)(m,2),b=g[0],w=g[1],j=(0,c.useState)(1),y=(0,r.Z)(j,2),k=y[0],Z=y[1],_=(0,c.useState)(1),S=(0,r.Z)(_,2),B=S[0],C=S[1],Q=(0,c.useState)(0),E=(0,r.Z)(Q,2),F=E[0],L=E[1],R=(0,u.lr)(),U=(0,r.Z)(R,2),q=U[0],D=U[1],H=q.get("search"),N=q.get("page");return(0,c.useEffect)((function(){H&&N?(0,a.QB)(H,N).then((function(t){i(t.results),C(t.total_pages),L(t.total_results),v(!1)})).catch((function(t){w(!0),v(!1)})):(l(""),i([]),L(0),C(1))}),[H,N]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("form",{onSubmit:function(t){t.preventDefault(),f&&(D({search:f,page:k}),v(!0),w(!1),i([]),Z(1),C(1),L(0),(0,a.QB)(f,k).then((function(t){i(t.results),C(t.total_pages),L(t.total_results),v(!1)})).catch((function(t){w(!0),v(!1)})))},children:[(0,s.jsx)("input",{type:"text",value:f,onChange:function(t){return l(t.target.value)}}),(0,s.jsx)("button",{type:"submit",children:"Search"})]}),x&&(0,s.jsx)("div",{children:"Loading..."}),b&&(0,s.jsx)("div",{children:"Error"}),n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{children:"Results"}),(0,s.jsxs)("p",{children:[F," results found"]}),(0,s.jsx)("ul",{children:n&&n.map((function(t){return(0,s.jsxs)("li",{children:[t.poster_path&&(0,s.jsx)("img",{src:"https://image.tmdb.org/t/p/w500".concat(t.poster_path),alt:t.title}),(0,s.jsx)(u.rU,{to:"/movies/".concat(t.id),children:t.title})]},t.id)}))}),(0,s.jsx)("button",{onClick:function(){k>1&&(Z(k-1),D({search:f,page:k-1}),(0,a.QB)(f,k-1).then((function(t){i(t.results)})).catch((function(t){w(!0)})))},disabled:1===k,children:"Previous"}),(0,s.jsx)("button",{onClick:function(){k<B&&(Z(k+1),D({search:f,page:k+1}),(0,a.QB)(f,k+1).then((function(t){i(n.concat(t.results))})).catch((function(t){w(!0)})))},disabled:k===B,children:"Next"})]})]})}},9157:function(t,e,n){n.d(e,{Hx:function(){return m},QB:function(){return f},Y5:function(){return h},wr:function(){return o},xc:function(){return x}});var r=n(5861),a=n(7757),c=n.n(a),u=n(4569),s=n.n(u);s().defaults.baseURL="https://api.themoviedb.org/3/";var i="api_key=b34281a335cdd1f5098a9d04801c5c05";function o(){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s().get("/trending/movie/day?".concat(i));case 2:return e=t.sent,t.abrupt("return",e.data.results);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(t,e){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(c().mark((function t(e,n){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s().get("/search/movie?".concat(i,"&query=").concat(e,"&page=").concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(c().mark((function t(e){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s().get("/movie/".concat(e,"?").concat(i));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(t){return v.apply(this,arguments)}function v(){return(v=(0,r.Z)(c().mark((function t(e){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s().get("/movie/".concat(e,"/credits?").concat(i));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(t){return g.apply(this,arguments)}function g(){return(g=(0,r.Z)(c().mark((function t(e){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s().get("/movie/".concat(e,"/reviews?").concat(i));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=115.da8b7027.chunk.js.map
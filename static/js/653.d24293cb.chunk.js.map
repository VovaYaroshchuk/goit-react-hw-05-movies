{"version":3,"file":"static/js/653.d24293cb.chunk.js","mappings":"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","sources":["webpack://react-homework-template/./src/components/Movies/Movies.module.css?9f30","components/Movies/Movies.jsx","components/services/API.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"form\":\"Movies_form__mp42q\",\"title\":\"Movies_title__EqSqF\",\"total\":\"Movies_total__9D3d4\",\"list\":\"Movies_list__JEO-P\",\"list_item\":\"Movies_list_item__4Iyn+\",\"img\":\"Movies_img__CI9Z3\",\"link\":\"Movies_link__0oDWE\",\"nav_btn\":\"Movies_nav_btn__Y62U2\"};","import {feachSearchMovie} from \"../services/API\";\nimport { useState, useEffect, } from \"react\";\nimport { Link, useSearchParams } from \"react-router-dom\";\nimport styles from \"./Movies.module.css\";\n\nconst Movies = () => {\n    const [movies, setMovies] = useState([]);\n    const [search, setSearch] = useState(\"\");\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [page, setPage] = useState(1);\n    const [totalPages, setTotalPages] = useState(1);\n    const [totalResults, setTotalResults] = useState(0);\n    const [searchParams, setSearchParams] = useSearchParams();\n    const searchUrl = searchParams.get(\"search\");\n    const pageUrl = searchParams.get(\"page\");\n\n\n    const searchMovie = (e) => {\n        e.preventDefault();\n        if (!search) {\n            return;\n        }\n        setSearchParams({search: search, page: page});\n        setLoading(true);\n        setError(false);\n        setMovies([]);\n        setPage(1);\n        setTotalPages(1);\n        setTotalResults(0);\n        feachSearchMovie(search, page).then(data => {\n            setMovies(data.results);\n            setTotalPages(data.total_pages);\n            setTotalResults(data.total_results);\n            setLoading(false);\n        }).catch(error => {\n            setError(true);\n            setLoading(false);\n        }\n        );\n    }\n    const nextPage = () => {\n        if (page < totalPages) {\n            setPage(page + 1);\n            setSearchParams({search: search, page: page + 1});\n            feachSearchMovie(search, page + 1).then(data => {\n                setMovies(movies.concat(data.results));\n            }).catch(error => {\n                setError(true);\n            }\n            );\n        }\n    }\n    const previousPage = () => {\n        if (page > 1) {\n            setPage(page - 1);\n            setSearchParams({search: search, page: page - 1});\n            feachSearchMovie(search, page - 1).then(data => {\n                setMovies(data.results);\n            }).catch(error => {\n                setError(true);\n            }\n            );\n        }\n    }\n\n    useEffect(() => {\n        if (searchUrl && pageUrl) {\n            feachSearchMovie(searchUrl, pageUrl).then(data => {\n                setMovies(data.results);\n                setTotalPages(data.total_pages);\n                setTotalResults(data.total_results);\n                setLoading(false);\n            }).catch(error => {\n                setError(true);\n                setLoading(false);\n            }\n            );\n        }\n        else {\n            setSearch(\"\");\n            setMovies ([]);\n            setTotalResults(0);\n            setTotalPages(1);\n        }\n    }\n    , [searchUrl, pageUrl]);\n\n    \n    \n\n    // useEffect(() => {\n    //     if (search) {\n\n    //     setSearchParams(value !== search ? { search } : {});\n    //     console.log(searchParams);\n\n    //     feachSearchMovie(search, page).then(data => {\n    //         setMovies(data.results);\n    //         setTotalPages(data.total_pages);\n    //         setTotalResults(data.total_results);\n    //     }).catch(error => {\n    //         setError(true);\n    //     }\n    //     );}\n    // }\n    // , [search, page]);\n    return (\n        <>\n            <form className={styles.form} onSubmit={searchMovie}>\n                <input type=\"text\" value={search} onChange={e => setSearch(e.target.value)} />\n                <button type=\"submit\">Search</button>\n            </form>\n            {loading && <div>Loading...</div>}\n            {error && <div>Error</div>}\n            {movies && (\n                <>\n                    <h1 className={styles.title} >Results</h1>\n                    <p className={styles.total}>{totalResults} results found</p>\n                    <ul className={styles.list}>\n                        {movies && movies.map(movie => (\n                            <li className={styles.list_item} key={movie.id}>\n                                {movie.poster_path &&\n                                <img className={styles.img} src={`https://image.tmdb.org/t/p/w500${movie.poster_path}`} alt={movie.title} />}\n                                \n                                <Link className={styles.link} to={`/movies/${movie.id}`}>\n                                    {movie.title}\n                                </Link>\n                            </li>\n                        ))}\n                    </ul>\n                    <button className={styles.nav_btn} onClick={previousPage} disabled={page === 1}>Previous</button>\n                    <button className={styles.nav_btn} onClick={nextPage} disabled={page === totalPages}>Next</button>\n                </>\n            )}\n        </>\n    );\n\n        \n}\n\nexport default Movies;","import axios  from \"axios\";\naxios.defaults.baseURL = \"https://api.themoviedb.org/3/\";\nconst API_KEY = \"api_key=b34281a335cdd1f5098a9d04801c5c05\";\n\nexport async function fetchTrendingMovies() {\n  const response = await axios.get(`/trending/movie/day?${API_KEY}`);\n  return response.data.results;\n}\n\nexport async function feachSearchMovie(search, page) {\n  const response = await axios.get(`/search/movie?${API_KEY}&query=${search}&page=${page}`);\n  return response.data;\n}\n\nexport async function fetchMovieDetails(movieId) {\n    const response = await axios.get(`/movie/${movieId}?${API_KEY}`);\n    return response.data;\n}\n\nexport async function fetchMovieCredits(movieId) {\n    const response = await axios.get(`/movie/${movieId}/credits?${API_KEY}`);\n    return response.data;\n}\n\nexport async function fetchMovieReviews(movieId) {\n    const response = await axios.get(`/movie/${movieId}/reviews?${API_KEY}`);\n    return response.data;\n}\n\n\n\n\n        \n"],"names":["useState","movies","setMovies","search","setSearch","loading","setLoading","error","setError","page","setPage","totalPages","setTotalPages","totalResults","setTotalResults","useSearchParams","searchParams","setSearchParams","searchUrl","get","pageUrl","useEffect","feachSearchMovie","then","data","results","total_pages","total_results","catch","className","styles","onSubmit","e","preventDefault","type","value","onChange","target","map","movie","poster_path","src","alt","title","to","id","onClick","disabled","concat","axios","API_KEY","fetchTrendingMovies","response","fetchMovieDetails","movieId","fetchMovieCredits","fetchMovieReviews"],"sourceRoot":""}